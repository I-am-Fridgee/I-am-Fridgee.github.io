
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bloxdschem Block Viewer</title>
    <style>
        body { font-family: sans-serif; margin: 2em; }
        #dropzone {
            border: 2px dashed #888;
            padding: 2em;
            text-align: center;
            color: #888;
            margin-bottom: 1em;
        }
        table { border-collapse: collapse; width: 100%; margin-top: 1em; }
        th, td { border: 1px solid #ccc; padding: 0.5em; text-align: left; }
        #error { color: red; margin-top: 1em; }
    </style>
</head>
<body>
    <h1>Bloxdschem Block Viewer</h1>
    <div id="dropzone">Drag and drop a <code>.bloxdschem</code> file here</div>
    <div id="error"></div>
    <div id="table"></div>
    <script>
        const dropzone = document.getElementById('dropzone');
        const errorDiv = document.getElementById('error');
        const tableDiv = document.getElementById('table');

        dropzone.addEventListener('dragover', e => {
            e.preventDefault();
            dropzone.style.borderColor = '#333';
        });

        dropzone.addEventListener('dragleave', e => {
            dropzone.style.borderColor = '#888';
        });

        dropzone.addEventListener('drop', e => {
            e.preventDefault();
            dropzone.style.borderColor = '#888';
            errorDiv.textContent = '';
            tableDiv.innerHTML = '';
            const file = e.dataTransfer.files[0];
            if (!file || !file.name.endsWith('.bloxdschem')) {
                errorDiv.textContent = 'Please drop a valid .bloxdschem file.';
                return;
            }
            const reader = new FileReader();
            reader.onload = function(evt) {
                try {
                    const data = JSON.parse(evt.target.result);
                    if (!Array.isArray(data.blocks)) throw 0;
                    const blocks = data.blocks;
                    let html = '<table><tr><th>Name</th><th>X</th><th>Y</th><th>Z</th></tr>';
                    for (const block of blocks) {
                        if (
                            typeof block.name !== 'string' ||
                            typeof block.x !== 'number' ||
                            typeof block.y !== 'number' ||
                            typeof block.z !== 'number'
                        ) throw 0;
                        html += `<tr><td>${block.name}</td><td>${block.x}</td><td>${block.y}</td><td>${block.z}</td></tr>`;
                    }
                    html += '</table>';
                    tableDiv.innerHTML = html;
                } catch {
                    errorDiv.textContent = 'Invalid .bloxdschem file format.';
                }
            };
            reader.onerror = function() {
                errorDiv.textContent = 'Failed to read file.';
            };
            reader.readAsText(file);
        });
    </script>
</body>
</html>
